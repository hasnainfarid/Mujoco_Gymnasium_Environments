<?xml version="1.0" ?>
<mujoco model="complete_assembly_system">
  <compiler angle="radian" coordinate="local" inertiafromgeom="true"/>
  <option timestep="0.002" gravity="0 0 -9.81" iterations="50" solver="Newton" tolerance="1e-10"/>
  
  <default>
    <joint armature="1" damping="10" limited="true"/>
    <geom contype="1" conaffinity="1" friction="1 0.5 0.5" rgba="0.7 0.7 0.7 1"/>
    <motor ctrllimited="true" ctrlrange="-1 1"/>
  </default>
  
  <visual>
    <headlight diffuse="0.5 0.5 0.5" ambient="0.3 0.3 0.3" specular="0 0 0"/>
    <rgba haze="0.15 0.25 0.35 1"/>
    <global azimuth="120" elevation="-20"/>
  </visual>
  
  <!-- Include the robot arm model -->
  <include file="robot_arm.xml"/>
  
  <!-- Include the assembly station model -->
  <include file="assembly_station.xml"/>
  
  <!-- Additional cameras for visualization -->
  <worldbody>
    <camera name="overview" pos="2 -2 3" xyaxes="0.5 0.866 0 -0.433 0.25 0.866" mode="fixed"/>
    <camera name="side_view" pos="0 -2.5 1.5" xyaxes="1 0 0 0 0 1" mode="fixed"/>
    <camera name="top_view" pos="0 0 3" xyaxes="1 0 0 0 1 0" mode="fixed"/>
    <camera name="gripper_view" pos="0 0 0" xyaxes="1 0 0 0 0 1" mode="track" body="gripper_mount"/>
    
    <!-- Additional lighting -->
    <light name="spotlight1" pos="1 1 3" dir="-0.5 -0.5 -1" diffuse="0.8 0.8 0.8" specular="0.2 0.2 0.2" cutoff="45"/>
    <light name="spotlight2" pos="-1 -1 3" dir="0.5 0.5 -1" diffuse="0.8 0.8 0.8" specular="0.2 0.2 0.2" cutoff="45"/>
  </worldbody>
  
  <!-- Contact pairs for precise interaction -->
  <contact>
    <pair geom1="gripper_left_pad" geom2="pcb_board" condim="6" friction="2 1 1"/>
    <pair geom1="gripper_right_pad" geom2="pcb_board" condim="6" friction="2 1 1"/>
    <pair geom1="gripper_left_pad" geom2="cpu_chip" condim="6" friction="2 1 1"/>
    <pair geom1="gripper_right_pad" geom2="cpu_chip" condim="6" friction="2 1 1"/>
    <pair geom1="gripper_left_pad" geom2="battery_pack" condim="6" friction="2 1 1"/>
    <pair geom1="gripper_right_pad" geom2="battery_pack" condim="6" friction="2 1 1"/>
    <pair geom1="gripper_left_pad" geom2="cover_top" condim="6" friction="2 1 1"/>
    <pair geom1="gripper_right_pad" geom2="cover_top" condim="6" friction="2 1 1"/>
    <pair geom1="gripper_left_pad" geom2="cable_body" condim="6" friction="2 1 1"/>
    <pair geom1="gripper_right_pad" geom2="cable_body" condim="6" friction="2 1 1"/>
    
    <!-- Screw interactions -->
    <pair geom1="gripper_left_pad" geom2="screw1_head" condim="6" friction="2 1 1"/>
    <pair geom1="gripper_right_pad" geom2="screw1_head" condim="6" friction="2 1 1"/>
    <pair geom1="gripper_left_pad" geom2="screw2_head" condim="6" friction="2 1 1"/>
    <pair geom1="gripper_right_pad" geom2="screw2_head" condim="6" friction="2 1 1"/>
    <pair geom1="gripper_left_pad" geom2="screw3_head" condim="6" friction="2 1 1"/>
    <pair geom1="gripper_right_pad" geom2="screw3_head" condim="6" friction="2 1 1"/>
    <pair geom1="gripper_left_pad" geom2="screw4_head" condim="6" friction="2 1 1"/>
    <pair geom1="gripper_right_pad" geom2="screw4_head" condim="6" friction="2 1 1"/>
    
    <!-- Component-to-component interactions -->
    <pair geom1="cpu_pins" geom2="cpu_socket" condim="6" friction="0.5 0.5 0.5"/>
    <pair geom1="battery_connector_male" geom2="battery_connector" condim="6" friction="0.8 0.8 0.8"/>
    <pair geom1="cable_connector1" geom2="cable_connector" condim="6" friction="0.8 0.8 0.8"/>
    
    <!-- Screw-to-hole interactions -->
    <pair geom1="screw1_shaft" geom2="mount_post1" condim="6" friction="0.5 0.5 0.5"/>
    <pair geom1="screw2_shaft" geom2="mount_post2" condim="6" friction="0.5 0.5 0.5"/>
    <pair geom1="screw3_shaft" geom2="mount_post3" condim="6" friction="0.5 0.5 0.5"/>
    <pair geom1="screw4_shaft" geom2="mount_post4" condim="6" friction="0.5 0.5 0.5"/>
  </contact>
  
  <!-- Equality constraints for assembled components -->
  <equality>
    <!-- These will be activated programmatically when components are assembled -->
    <!-- <weld body1="pcb" body2="fixture" active="false"/> -->
    <!-- <weld body1="cpu" body2="pcb" active="false"/> -->
  </equality>
</mujoco>
