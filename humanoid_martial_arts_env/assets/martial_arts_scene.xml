<?xml version="1.0"?>
<mujoco model="humanoid_martial_arts">
    <compiler angle="degree" inertiafromgeom="true"/>
    <default>
        <joint armature="0.01" damping="0.5" limited="true"/>
        <geom contype="1" conaffinity="1" condim="3" friction="0.9 0.05 0.05" margin="0.01"/>
        <motor ctrlrange="-1 1" ctrllimited="true"/>
    </default>
    
    <option timestep="0.01667" gravity="0 0 -9.81" iterations="50" tolerance="1e-10" solver="Newton" jacobian="dense" cone="pyramidal"/>
    
    <visual>
        <quality shadowsize="2048"/>
        <headlight ambient="0.3 0.3 0.3" diffuse="0.5 0.5 0.5" specular="0.1 0.1 0.1"/>
    </visual>
    
    <size njmax="1000" nconmax="500" nstack="600000"/>
    
    <asset>
        <texture name="grid" type="2d" builtin="checker" rgb1="0.1 0.2 0.3" rgb2="0.2 0.3 0.4" width="512" height="512"/>
        <texture name="mat" type="2d" builtin="flat" rgb1="0.8 0.6 0.4" width="512" height="512"/>
        <material name="grid" texture="grid" texrepeat="10 10" specular="0.3" shininess="0.3" reflectance="0.1"/>
        <material name="mat" texture="mat" texrepeat="5 5" specular="0.3" shininess="0.3" reflectance="0.2"/>
    </asset>
    
    <worldbody>
        <!-- Dojo floor -->
        <geom name="floor" type="plane" size="6 6 0.1" material="grid" contype="1" conaffinity="1"/>
        <geom name="training_mat" type="box" pos="0 0 0.05" size="4 4 0.05" material="mat" contype="1" conaffinity="1"/>
        
        <!-- Walls for spatial reference -->
        <geom name="wall_north" type="box" pos="0 6 2" size="6 0.1 2" rgba="0.5 0.5 0.5 1" contype="1" conaffinity="1"/>
        <geom name="wall_south" type="box" pos="0 -6 2" size="6 0.1 2" rgba="0.5 0.5 0.5 1" contype="1" conaffinity="1"/>
        <geom name="wall_east" type="box" pos="6 0 2" size="0.1 6 2" rgba="0.5 0.5 0.5 1" contype="1" conaffinity="1"/>
        <geom name="wall_west" type="box" pos="-6 0 2" size="0.1 6 2" rgba="0.5 0.5 0.5 1" contype="1" conaffinity="1"/>
        
        <!-- Training dummies -->
        <body name="dummy1" pos="2 0 0">
            <joint name="dummy1_base" type="free"/>
            <geom name="dummy1_torso" type="cylinder" size="0.2 0.5" pos="0 0 1" rgba="0.7 0.3 0.3 1" mass="20"/>
            <geom name="dummy1_head" type="sphere" size="0.15" pos="0 0 1.65" rgba="0.7 0.3 0.3 1" mass="5"/>
        </body>
        
        <body name="dummy2" pos="-2 0 0">
            <joint name="dummy2_base" type="free"/>
            <geom name="dummy2_torso" type="cylinder" size="0.2 0.5" pos="0 0 1" rgba="0.3 0.3 0.7 1" mass="20"/>
            <geom name="dummy2_head" type="sphere" size="0.15" pos="0 0 1.65" rgba="0.3 0.3 0.7 1" mass="5"/>
        </body>
        
        <!-- Breaking boards for technique testing -->
        <body name="board1" pos="0 2 1.2">
            <joint name="board1_joint" type="hinge" axis="1 0 0" range="-45 45" damping="0.1"/>
            <geom name="board1_plank" type="box" size="0.3 0.02 0.3" rgba="0.6 0.4 0.2 1" mass="0.5"/>
        </body>
        
        <!-- Humanoid martial artist -->
        <body name="torso" pos="0 0 1.4">
            <joint name="torso_joint" type="free"/>
            <geom name="torso_geom" type="capsule" size="0.15 0.3" rgba="0.8 0.6 0.4 1" mass="10"/>
            
            <!-- Head -->
            <body name="head" pos="0 0 0.5">
                <joint name="neck_pitch" type="hinge" axis="0 1 0" range="-45 45"/>
                <joint name="neck_yaw" type="hinge" axis="0 0 1" range="-90 90"/>
                <geom name="head_geom" type="sphere" size="0.12" rgba="0.8 0.6 0.4 1" mass="3"/>
            </body>
            
            <!-- Right arm -->
            <body name="right_shoulder" pos="0.25 0 0.3">
                <joint name="right_shoulder_pitch" type="hinge" axis="0 1 0" range="-180 90"/>
                <joint name="right_shoulder_roll" type="hinge" axis="1 0 0" range="-90 180"/>
                <joint name="right_shoulder_yaw" type="hinge" axis="0 0 1" range="-90 90"/>
                <geom name="right_upper_arm" type="capsule" fromto="0 0 0 0.3 0 -0.3" size="0.05" rgba="0.8 0.6 0.4 1" mass="2"/>
                
                <body name="right_elbow" pos="0.3 0 -0.3">
                    <joint name="right_elbow_pitch" type="hinge" axis="0 1 0" range="0 150"/>
                    <geom name="right_forearm" type="capsule" fromto="0 0 0 0.25 0 -0.25" size="0.04" rgba="0.8 0.6 0.4 1" mass="1.5"/>
                    
                    <body name="right_hand" pos="0.25 0 -0.25">
                        <joint name="right_wrist_pitch" type="hinge" axis="0 1 0" range="-90 90"/>
                        <joint name="right_wrist_roll" type="hinge" axis="1 0 0" range="-45 45"/>
                        <geom name="right_hand_geom" type="box" size="0.04 0.08 0.02" rgba="0.8 0.6 0.4 1" mass="0.5"/>
                        <site name="right_hand" pos="0 0 0" size="0.01"/>
                    </body>
                </body>
            </body>
            
            <!-- Left arm (mirror of right) -->
            <body name="left_shoulder" pos="-0.25 0 0.3">
                <joint name="left_shoulder_pitch" type="hinge" axis="0 1 0" range="-180 90"/>
                <joint name="left_shoulder_roll" type="hinge" axis="1 0 0" range="-180 90"/>
                <joint name="left_shoulder_yaw" type="hinge" axis="0 0 1" range="-90 90"/>
                <geom name="left_upper_arm" type="capsule" fromto="0 0 0 -0.3 0 -0.3" size="0.05" rgba="0.8 0.6 0.4 1" mass="2"/>
                
                <body name="left_elbow" pos="-0.3 0 -0.3">
                    <joint name="left_elbow_pitch" type="hinge" axis="0 1 0" range="0 150"/>
                    <geom name="left_forearm" type="capsule" fromto="0 0 0 -0.25 0 -0.25" size="0.04" rgba="0.8 0.6 0.4 1" mass="1.5"/>
                    
                    <body name="left_hand" pos="-0.25 0 -0.25">
                        <joint name="left_wrist_pitch" type="hinge" axis="0 1 0" range="-90 90"/>
                        <joint name="left_wrist_roll" type="hinge" axis="1 0 0" range="-45 45"/>
                        <geom name="left_hand_geom" type="box" size="0.04 0.08 0.02" rgba="0.8 0.6 0.4 1" mass="0.5"/>
                        <site name="left_hand" pos="0 0 0" size="0.01"/>
                    </body>
                </body>
            </body>
            
            <!-- Pelvis and legs -->
            <body name="pelvis" pos="0 0 -0.4">
                <joint name="waist_pitch" type="hinge" axis="0 1 0" range="-45 45"/>
                <joint name="waist_yaw" type="hinge" axis="0 0 1" range="-90 90"/>
                <geom name="pelvis_geom" type="box" size="0.15 0.1 0.08" rgba="0.8 0.6 0.4 1" mass="5"/>
                
                <!-- Right leg -->
                <body name="right_hip" pos="0.1 0 -0.1">
                    <joint name="right_hip_pitch" type="hinge" axis="0 1 0" range="-120 45"/>
                    <joint name="right_hip_roll" type="hinge" axis="1 0 0" range="-45 45"/>
                    <joint name="right_hip_yaw" type="hinge" axis="0 0 1" range="-45 45"/>
                    <geom name="right_thigh" type="capsule" fromto="0 0 0 0 0 -0.4" size="0.06" rgba="0.8 0.6 0.4 1" mass="4"/>
                    
                    <body name="right_knee" pos="0 0 -0.4">
                        <joint name="right_knee_pitch" type="hinge" axis="0 1 0" range="0 150"/>
                        <geom name="right_shin" type="capsule" fromto="0 0 0 0 0 -0.35" size="0.05" rgba="0.8 0.6 0.4 1" mass="3"/>
                        
                        <body name="right_ankle" pos="0 0 -0.35">
                            <joint name="right_ankle_pitch" type="hinge" axis="0 1 0" range="-45 45"/>
                            <joint name="right_ankle_roll" type="hinge" axis="1 0 0" range="-30 30"/>
                            <geom name="right_foot" type="box" size="0.08 0.15 0.03" pos="0 0.05 -0.03" rgba="0.5 0.3 0.2 1" mass="1"/>
                            <site name="right_foot" pos="0 0 0" size="0.01"/>
                        </body>
                    </body>
                </body>
                
                <!-- Left leg (mirror of right) -->
                <body name="left_hip" pos="-0.1 0 -0.1">
                    <joint name="left_hip_pitch" type="hinge" axis="0 1 0" range="-120 45"/>
                    <joint name="left_hip_roll" type="hinge" axis="1 0 0" range="-45 45"/>
                    <joint name="left_hip_yaw" type="hinge" axis="0 0 1" range="-45 45"/>
                    <geom name="left_thigh" type="capsule" fromto="0 0 0 0 0 -0.4" size="0.06" rgba="0.8 0.6 0.4 1" mass="4"/>
                    
                    <body name="left_knee" pos="0 0 -0.4">
                        <joint name="left_knee_pitch" type="hinge" axis="0 1 0" range="0 150"/>
                        <geom name="left_shin" type="capsule" fromto="0 0 0 0 0 -0.35" size="0.05" rgba="0.8 0.6 0.4 1" mass="3"/>
                        
                        <body name="left_ankle" pos="0 0 -0.35">
                            <joint name="left_ankle_pitch" type="hinge" axis="0 1 0" range="-45 45"/>
                            <joint name="left_ankle_roll" type="hinge" axis="1 0 0" range="-30 30"/>
                            <geom name="left_foot" type="box" size="0.08 0.15 0.03" pos="0 0.05 -0.03" rgba="0.5 0.3 0.2 1" mass="1"/>
                            <site name="left_foot" pos="0 0 0" size="0.01"/>
                        </body>
                    </body>
                </body>
            </body>
        </body>
        
        <!-- Camera for different viewing angles -->
        <camera name="side_view" pos="5 0 2" xyaxes="0 -1 0 0 0 1" fovy="60"/>
        <camera name="front_view" pos="0 -5 2" xyaxes="1 0 0 0 0 1" fovy="60"/>
        <camera name="top_view" pos="0 0 8" xyaxes="1 0 0 0 1 0" fovy="60"/>
    </worldbody>
    
    <actuator>
        <!-- Head actuators -->
        <motor name="neck_pitch_motor" joint="neck_pitch" ctrlrange="-50 50"/>
        <motor name="neck_yaw_motor" joint="neck_yaw" ctrlrange="-50 50"/>
        
        <!-- Right arm actuators -->
        <motor name="right_shoulder_pitch_motor" joint="right_shoulder_pitch" ctrlrange="-100 100"/>
        <motor name="right_shoulder_roll_motor" joint="right_shoulder_roll" ctrlrange="-100 100"/>
        <motor name="right_shoulder_yaw_motor" joint="right_shoulder_yaw" ctrlrange="-100 100"/>
        <motor name="right_elbow_motor" joint="right_elbow_pitch" ctrlrange="-80 80"/>
        <motor name="right_wrist_pitch_motor" joint="right_wrist_pitch" ctrlrange="-40 40"/>
        <motor name="right_wrist_roll_motor" joint="right_wrist_roll" ctrlrange="-40 40"/>
        
        <!-- Left arm actuators -->
        <motor name="left_shoulder_pitch_motor" joint="left_shoulder_pitch" ctrlrange="-100 100"/>
        <motor name="left_shoulder_roll_motor" joint="left_shoulder_roll" ctrlrange="-100 100"/>
        <motor name="left_shoulder_yaw_motor" joint="left_shoulder_yaw" ctrlrange="-100 100"/>
        <motor name="left_elbow_motor" joint="left_elbow_pitch" ctrlrange="-80 80"/>
        <motor name="left_wrist_pitch_motor" joint="left_wrist_pitch" ctrlrange="-40 40"/>
        <motor name="left_wrist_roll_motor" joint="left_wrist_roll" ctrlrange="-40 40"/>
        
        <!-- Waist actuators -->
        <motor name="waist_pitch_motor" joint="waist_pitch" ctrlrange="-50 50"/>
        <motor name="waist_yaw_motor" joint="waist_yaw" ctrlrange="-50 50"/>
        
        <!-- Right leg actuators -->
        <motor name="right_hip_pitch_motor" joint="right_hip_pitch" ctrlrange="-150 150"/>
        <motor name="right_hip_roll_motor" joint="right_hip_roll" ctrlrange="-100 100"/>
        <motor name="right_hip_yaw_motor" joint="right_hip_yaw" ctrlrange="-100 100"/>
        <motor name="right_knee_motor" joint="right_knee_pitch" ctrlrange="-120 120"/>
        <motor name="right_ankle_pitch_motor" joint="right_ankle_pitch" ctrlrange="-60 60"/>
        <motor name="right_ankle_roll_motor" joint="right_ankle_roll" ctrlrange="-60 60"/>
        
        <!-- Left leg actuators -->
        <motor name="left_hip_pitch_motor" joint="left_hip_pitch" ctrlrange="-150 150"/>
        <motor name="left_hip_roll_motor" joint="left_hip_roll" ctrlrange="-100 100"/>
        <motor name="left_hip_yaw_motor" joint="left_hip_yaw" ctrlrange="-100 100"/>
        <motor name="left_knee_motor" joint="left_knee_pitch" ctrlrange="-120 120"/>
        <motor name="left_ankle_pitch_motor" joint="left_ankle_pitch" ctrlrange="-60 60"/>
        <motor name="left_ankle_roll_motor" joint="left_ankle_roll" ctrlrange="-60 60"/>
    </actuator>
    
    <sensor>
        <!-- Force sensors -->
        <force name="right_hand_force" site="right_hand"/>
        <force name="left_hand_force" site="left_hand"/>
        <force name="right_foot_force" site="right_foot"/>
        <force name="left_foot_force" site="left_foot"/>
        
        <!-- Position sensors -->
        <framepos name="torso_pos" objtype="body" objname="torso"/>
        <framequat name="torso_quat" objtype="body" objname="torso"/>
        
        <!-- Velocity sensors -->
        <framelinvel name="torso_linvel" objtype="body" objname="torso"/>
        <frameangvel name="torso_angvel" objtype="body" objname="torso"/>
        
        <!-- Joint sensors -->
        <jointpos name="neck_pos" joint="neck_pitch"/>
        <jointvel name="neck_vel" joint="neck_pitch"/>
    </sensor>
</mujoco>
        